---
title: "Tugas UTS"
author: "Angga Fathan Rofiqy"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  rmdformats::downcute:
    self_contained: true
    thumbnails: false
    lightbox: true
    gallery: true
    highlight: tango
    code_folding: show
    toc_depth: 3
    number_sections: false
    toc_float:
      collapsed: true
      smooth_scroll: true
    fig_caption: true
pkgdown:
  as_is: true
---

```{r setup, include=FALSE, echo=FALSE, warning=FALSE, message = FALSE}
path <- function() gsub  ( "\\\\",  "/",  readClipboard ()  )

require("knitr")
opts_knit$set(root.dir = "C:/Users/Fathan/Documents/Obsidian Vault/2. Kuliah/Smt 6/1. Metode Simulasi dan Resampling/Project/Tugas UTS")

#Export chart
export.chart <- "C:/Users/Fathan/Documents/Obsidian Vault/2. Kuliah/Smt 6/1. Metode Simulasi dan Resampling/Project/Tugas UTS/Chart"

#                      -=( Install & Load Package Function )=-
install_load <- function (package1, ...)  {   

   # convert arguments to vector
   packages <- c(package1, ...)

   # start loop to determine if each package is installed
   for(package in packages){

       # if package is installed locally, load
       if(package %in% rownames(installed.packages()))
          do.call('library', list(package))

       # if package is not installed locally, download, then load
       else {
          install.packages(package)
          do.call("library", list(package))
       }
   } 
}

install_load("DT","dplyr","ggplot2","gridExtra","readxl")
```

# Resampling Jackknife

## Pendahuluan

Proses **pendugaan parameter** selalu didasari dengan **asumsi sebaran** dan **ukuran contoh** yang memadai. **Asumsi sebaran** ini menjadi dasar penentuan **selang kepercayaan** bagi parameter (misal 𝜇). Selang kepercayaan bagi 𝜇 juga **bisa diperoleh** meskipun **contoh acak berukuran kecil** tetapi kita mengasumsikan populasinya memiliki **sebaran Normal**. Seandainya contoh acak berukuran kecil dan sebaran populasinya tidak diketahui, selang kepercayaan bagi parameter **tidak bisa diperoleh** tanpa sebaran.

Contoh acak **berukuran kecil** tidak jarang diperoleh dan bahkan **tidak ada informasi** tentang **sebarannya**. Pendugaan selang bagi parameter harus dengan metode yang didasarkan pada asumsi sebaran. Sebaran populasi data tidak diketahui sehingga kita tidak mempunyai dasar yang kuat untuk menduga selang kepecayaan tanpa sebaran.

> Jadi inti permasalahan nya adalah ketika n berukuran kecil, karena:

-   Ukuran **n kecil** mengakibatkan beberapa **teori peluang** dan **statistika inferensia** **tidak terpenuhi**.

-   Ukuran **n kecil** juga menjadi per**masalah**an dalam suatu **pendugaan parameter** yang berkaitan dengan **tingkat keakuratan dan ketelitian**.

-   Ukuran **n kecil** mengakibatkan Tidak adanya informasi mengenai sebaran populasi.

-   Ukuran **n kecil** memiliki masalah dalam Pengujian Hipotesis.

> **Jackknife** dapat digunakan sebagai cara **pendugaan selang** dalam kondisi **data berukuran kecil** dan **tidak memenuhi asumsi sebaran**.

Sama seperti metode bootstrap, Ide dasar dari jackknife adalah **membangun data semu** dengan menggunakan informasi data asli. Sehingga kita bisa memperoleh **n** yang lebih **besar**. Metode ini menjadi sebuah metode yang efisien untuk mendapatkan **hasil yang robust**.

Metode Jackknife menggunakan **partisi sistematis** dari kumpulan data untuk **mengestimasi properti** dari **estimator** dihitung dari **sampel penuh**. Quenouille (1949, 1956) menyarankan teknik untuk memperkirakan (dan, karenanya, **mengurangi**) **bias** dari suatu penduga. Tukey (1958) menciptakan istilah **pisau lipat** untuk merujuk pada metode, dan juga menunjukkan bahwa metode tersebut berguna dalam **mengestimasi varian** dari suatu penduga.

Skenario simulasi: Menggunakan data stok item dari 5 store (seperti pada contoh bootstrap) lalu mengestimasi perbandingan item1/total item dengan metode jackknife. pertam hitung proporsi duga selanjutnya mengulang resampling sebanyak 10000 kali, lalu hitung jackknife estimatornya dengan rumus berikut.

![](images/Screenshot 2024-02-27 121020-01.png){width="431"}

### Tujuan

Pada awalnya metode jackknife atau leave-one-out **bertujuan** untuk **menduga bias** dari suatu penduga yang diperkenalkan oleh Maurice Quenouille pada tahun 1949 dan dikembangkan oleh John Tukey pada tahun 1957, yang dikenal dengan Quenouille-Tukey Jackknife. Metode jackknife **serupa** dengan metode **bootstrap** untuk **galat baku**. Metode ini **seperti tipe validasi silang leave-one-out**. Bila 𝒙=(𝑥1, 𝑥2, …, 𝑥𝑛) adalah contoh acak dan 𝒙((𝒊)) adalah subset dari 𝒙 tanpa pengamatan 𝑥𝑖, yaitu 𝒙((𝒊))=(𝑥1, …,𝑥((𝑖−1) ), 𝑥((𝑖+1) ), …, 𝑥𝑛). Jika 𝜃 duga=𝑓𝑛 (𝒙), maka definisikan bahwa 𝜃 duga=𝑓(𝑛−1) ( 𝒙((𝒊) ) ), 𝑖=1, 2, …, 𝑛.

# Data

## Data Input

Data merupakan data persentase penduduk miskin menurut provinsi (persen) tahun 2022 per 6 bulan.

```{r}
raw.data <- read.csv("Data PSD.csv")
data <- raw.data[-nrow(raw.data), c("BJR","TL")] %>% as.data.frame()

datatable(raw.data, filter = 'top', 
          options = list(pageLength = 5))
```

Berdasarkan data ini, peniliti tertarik untuk menghitung **rasio dari mean** yang nantinya dapat digunakan untuk **menduga populasi** total USA pada **tahun 1930** **berdasarkan** jumlah **populasi** pada **tahun 1920**. Jika kota-kota ini merupakan sampel acak dengan (U,X) menotasikan pasangan nilai populasi dari kota yang terpilih secara acak, maka **total populasi 1930** merupakan **hasil perkalian** antara **total populasi 1920** dengan **rasio** dari ekspetasi **θ=E(X)/E(U)**,yang merupakan **parameter rasio** yang akan **diduga**. Dengan menggunakan JACKNIFE, hitunglah **galat baku** (standard error) dari θ duga, yang merupakan akar dari V(θduga), jika diketahui θduga=x_bar/u_bar!

## Data Checking

> Tipe Data

```{r}
str(data)
```

Tipe Data sudah sesuai. 

> Missing Value

```{r}
colSums(is.na(data))
```

## Data Exploration

Tidak ada data kosong.

```{r}
par(mfrow=c(1,2))
hist(data[,1]); hist(data[,2])
```

```{r}
n <- nrow(data)
#1. Hitung Teta Duga
teta_hat <- mean(data[,1])/ ( mean(data[,1]) +mean(data[,2]) )

#2. Jacknife Sampling
x1 <- matrix(NA, n, n-1)
x2 <- matrix(NA, n, n-1)
for (i in 1:n) {
  x1[i,] <- data[,1][-i]
  x2[i,] <- data[,2][-i]
}
x1bar <- apply(x1, 1, mean)
x2bar <- apply(x2, 1, mean)

#3. Menghitung Jacknife Estimator
teta_i <- x1bar/ (x2bar +x1bar)
teta_jk <- n *teta_hat -(n-1) *mean(teta_i)
var_jk <- (n-1)/ n *sum( (teta_i - mean(teta_i))^2 )
se_jk <- sqrt(var_jk)
teta_jk; var_jk; se_jk
```

```{r}
par(mfrow=c(2,2))
hist(data[,1]); hist(data[,2])
hist(x1); hist(x2)
```

Jadi, perbandingan item1/total item = 0.5379. Sehingga dapat diketahui jumlah item1 dengan item2 cenderung berimbang. Hasil dugaan parameter yang didapatkan dari metode jackknife tidak berbeda jauh dengan bootstrap namun keragaman penduganya lebih besar.
